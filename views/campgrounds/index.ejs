<% layout('/layouts/boilerplate') -%>
<div id="map" style="width: 100%; height: 500px"></div>
    <h1>All campgrounds</h1>
    <div>
      <% for(let i=0;i<campgrounds.length;i++ ){ %>
        <div class="card mb-3">
           <div class="row g-0">
               <div class="col-md-4">
                  <%if(campgrounds[i].images &&campgrounds[i].images.length) {%>
                        <img class="img-fluid" src="<%= campgrounds[i].images[0].url %> " alt="...">
                 <% }else {%>
                         <img class="img-fluid" src="https://res.cloudinary.com/douqbebwk/image/upload/v1600103881/YelpCamp/lz8jjv2gyynjil7lswf4.png" alt="...">
                   <% } %>
               </div>
               <div class="col-md-8">
                 <div class="card-body">
                    <h5 class="card-title"><%= campgrounds[i].title %></h5>
                    <p class="card-text"><%= campgrounds[i].description %></p>
                    <p class="card-text"><small class="text-muted font-monospace"><%= campgrounds[i].location %></small></p>
                    <a class="btn btn-primary" href="/campgrounds/<%= campgrounds[i]._id %> ">View <%= campgrounds[i].name %></a>
                 </div>
                </div>
           </div>
        </div>
      <% } %>  
     </div>

<script>
    const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
    const campgrounds = { features: <%- JSON.stringify(campgrounds) %>}
</script>

<script src="/javascript/clusterMap.js"></script>
